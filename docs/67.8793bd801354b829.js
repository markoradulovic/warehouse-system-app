"use strict";(self.webpackChunkwarehouse_system_app=self.webpackChunkwarehouse_system_app||[]).push([[67],{3067:(E,p,i)=>{i.r(p),i.d(p,{ProductFormComponent:()=>c});var l=i(6895),r=i(433),_=i(7579),u=i(2722),m=i(4004);class f{static uniqueCodeValidator(e){return o=>e.getProducts().pipe((0,m.U)(a=>a.some(s=>s.code===o.value)?{codeExists:!0}:null))}static emptyLocationValidator(e){return o=>e.getProducts().pipe((0,m.U)(a=>a.some(s=>s.floor===o.get("floor").value&&s.section===o.get("section").value&&s.id!==o.get("id").value)?{locationTaken:!0}:null))}}var t=i(8256),h=i(9390),g=i(4940);function C(n,e){1&n&&(t.TgZ(0,"span",14),t._uU(1,"Add New Product"),t.qZA())}function P(n,e){1&n&&(t.TgZ(0,"span",14),t._uU(1,"Edit Product"),t.qZA())}function q(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Unique product code is required. "),t.qZA())}function Z(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Code format is 2-4 uppercase letters, empty space and 4-6 digits. "),t.qZA())}function y(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Code must be unique."),t.qZA())}function v(n,e){if(1&n&&(t.TgZ(0,"span",15),t.YNc(1,q,2,0,"span",16),t.YNc(2,Z,2,0,"span",16),t.YNc(3,y,2,0,"span",16),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.code.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.code.hasError("pattern")),t.xp6(1),t.Q6J("ngIf",o.code.hasError("codeExists"))}}function F(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Product quantity is required. "),t.qZA())}function T(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Minimum quantity is 1. "),t.qZA())}function x(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Maximum quantity is 100. "),t.qZA())}function I(n,e){if(1&n&&(t.TgZ(0,"span",15),t.YNc(1,F,2,0,"span",16),t.YNc(2,T,2,0,"span",16),t.YNc(3,x,2,0,"span",16),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.quantity.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.quantity.hasError("min")),t.xp6(1),t.Q6J("ngIf",o.quantity.hasError("max"))}}function b(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Floor is required. "),t.qZA())}function A(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Floor range is 1-3. "),t.qZA())}function N(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Floor range is 1-3."),t.qZA())}function U(n,e){if(1&n&&(t.TgZ(0,"span",15),t.YNc(1,b,2,0,"span",16),t.YNc(2,A,2,0,"span",16),t.YNc(3,N,2,0,"span",16),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.floor.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.floor.hasError("min")),t.xp6(1),t.Q6J("ngIf",o.floor.hasError("max"))}}function J(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Section is required. "),t.qZA())}function Q(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Section range is 1-3. "),t.qZA())}function Y(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," Section range is 1-3."),t.qZA())}function M(n,e){if(1&n&&(t.TgZ(0,"span",15),t.YNc(1,J,2,0,"span",16),t.YNc(2,Q,2,0,"span",16),t.YNc(3,Y,2,0,"span",16),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.section.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.section.hasError("min")),t.xp6(1),t.Q6J("ngIf",o.section.hasError("max"))}}function O(n,e){1&n&&(t.TgZ(0,"span",17),t._uU(1," This location is already taken. "),t.qZA())}function w(n,e){if(1&n&&(t.TgZ(0,"span",15),t.YNc(1,O,2,0,"span",16),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.productForm.hasError("locationTaken"))}}const d=function(n){return{"is-invalid":n}},k=function(n){return{"is-disabled":n}};class c{get id(){return this.productForm?.get("id")}get code(){return this.productForm?.get("code")}get quantity(){return this.productForm?.get("quantity")}get floor(){return this.productForm?.get("floor")}get section(){return this.productForm?.get("section")}constructor(e,o,a,s){this.productService=e,this.formBuilder=o,this.router=a,this.route=s,this.destroy$=new _.x}ngOnInit(){this.buildForm(),this.getRouteData(),this.isNewProduct||this.populateForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}buildForm(){this.productForm=this.formBuilder.group({id:[null],code:[null,[r.kI.required,r.kI.pattern(/^[A-Z]{2,4}\s[0-9]{4,6}$/),r.kI.maxLength(11)],f.uniqueCodeValidator(this.productService)],quantity:[null,[r.kI.required,r.kI.min(1),r.kI.max(100)]],floor:[null,[r.kI.required,r.kI.min(1),r.kI.max(3)]],section:[null,[r.kI.required,r.kI.min(1),r.kI.max(3)]]},{validators:null,asyncValidators:f.emptyLocationValidator(this.productService)})}populateForm(){const e=this.route.snapshot.paramMap.get("id");this.productService.getProduct(+e).pipe((0,u.R)(this.destroy$)).subscribe(o=>{this.id.setValue(o?.id),this.code.setValue(o?.code),this.code.disable(),this.quantity.setValue(o?.quantity),this.floor.setValue(o?.floor),this.section.setValue(o?.section)})}getRouteData(){this.route.data.pipe((0,u.R)(this.destroy$)).subscribe(e=>this.isNewProduct=e.isNew)}onSave(){const e=this.productForm.value;this.isNewProduct?this.createProduct(e):this.updateProduct(e)}createProduct(e){this.productService.createProduct(e).pipe((0,u.R)(this.destroy$)).subscribe(()=>this.router.navigate(["/home"]))}updateProduct(e){this.productService.updateProduct(e).pipe((0,u.R)(this.destroy$)).subscribe(()=>this.router.navigate(["/home"]))}}c.\u0275fac=function(e){return new(e||c)(t.Y36(h.M),t.Y36(r.qu),t.Y36(g.F0),t.Y36(g.gz))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-product-form"]],standalone:!0,features:[t.jDz],decls:28,vars:24,consts:[["autocomplete","off",1,"form",3,"formGroup"],["class","form-title",4,"ngIf","ngIfElse"],["editProduct",""],[1,"form-row"],["for","code",1,"form-label"],["type","text","id","code","placeholder","Unique Product Code","formControlName","code",1,"form-input",3,"ngClass"],["class","invalid",4,"ngIf"],["for","quantity",1,"form-label"],["type","number","min","1","id","quantity","placeholder","Product Quantity","formControlName","quantity",1,"form-input",3,"ngClass"],["for","floor",1,"form-label"],["type","number","min","1","id","floor","placeholder","Floor 1-3","formControlName","floor",1,"form-input",3,"ngClass"],["for","section",1,"form-label"],["type","number","id","section","min","1","placeholder","Section 1-3","formControlName","section",1,"form-input",3,"ngClass"],["type","button",1,"warehouse-button",3,"disabled","ngClass","click"],[1,"form-title"],[1,"invalid"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.YNc(1,C,2,0,"span",1),t.YNc(2,P,2,0,"ng-template",null,2,t.W1O),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Product Code *"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,v,4,3,"span",6),t.qZA(),t.TgZ(9,"div",3)(10,"label",7),t._uU(11,"Quantity *"),t.qZA(),t._UZ(12,"input",8),t.YNc(13,I,4,3,"span",6),t.qZA(),t.TgZ(14,"div",3)(15,"label",9),t._uU(16,"Floor *"),t.qZA(),t._UZ(17,"input",10),t.YNc(18,U,4,3,"span",6),t.qZA(),t.TgZ(19,"div",3)(20,"label",11),t._uU(21,"Section *"),t.qZA(),t._UZ(22,"input",12),t.YNc(23,M,4,3,"span",6),t.qZA(),t.YNc(24,w,2,1,"span",6),t.TgZ(25,"div")(26,"button",13),t.NdJ("click",function(){return o.onSave()}),t._uU(27," Save Product "),t.qZA()()()),2&e){const a=t.MAs(3);t.Q6J("formGroup",o.productForm),t.xp6(1),t.Q6J("ngIf",o.isNewProduct)("ngIfElse",a),t.xp6(6),t.Q6J("ngClass",t.VKq(14,d,(o.code.touched||o.code.dirty)&&!o.code.valid)),t.xp6(1),t.Q6J("ngIf",(o.code.touched||o.code.dirty)&&!o.code.valid),t.xp6(4),t.Q6J("ngClass",t.VKq(16,d,(o.quantity.touched||o.quantity.dirty)&&!o.quantity.valid)),t.xp6(1),t.Q6J("ngIf",(o.quantity.touched||o.quantity.dirty)&&!o.quantity.valid),t.xp6(4),t.Q6J("ngClass",t.VKq(18,d,(o.floor.touched||o.floor.dirty)&&!o.floor.valid)),t.xp6(1),t.Q6J("ngIf",(o.floor.touched||o.floor.dirty)&&!o.floor.valid),t.xp6(4),t.Q6J("ngClass",t.VKq(20,d,(o.section.touched||o.section.dirty)&&!o.section.valid)),t.xp6(1),t.Q6J("ngIf",(o.section.touched||o.section.dirty)&&!o.section.valid),t.xp6(1),t.Q6J("ngIf",(o.productForm.touched||o.productForm.dirty)&&!o.productForm.valid),t.xp6(2),t.Q6J("disabled",o.productForm.invalid)("ngClass",t.VKq(22,k,o.productForm.invalid))}},dependencies:[r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,l.O5,l.mk],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;justify-content:flex-start;padding:2rem;flex-wrap:wrap}.form-title[_ngcontent-%COMP%]{color:#000;font-size:1.2rem}.form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2.5rem;align-items:center}.form-label[_ngcontent-%COMP%]{font-size:1rem;color:#999;padding:.25rem;min-width:4rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{color:#333;font-size:1rem;border:.05rem solid #333;border-radius:1.5rem;padding:.5rem;outline:transparent;min-width:15rem}.form-select[_ngcontent-%COMP%]:hover{cursor:pointer}.form[_ngcontent-%COMP%]   .is-invalid[_ngcontent-%COMP%]{border:.1rem solid #ff285a}.form[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]{margin:.15rem 0}.form[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{font-size:1rem;color:#ff285a}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.form-label[_ngcontent-%COMP%]{max-width:8rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{max-width:20rem}.form-footer[_ngcontent-%COMP%]{align-items:flex-start}"]})}}]);