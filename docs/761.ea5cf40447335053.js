"use strict";(self.webpackChunkwarehouse_system_app=self.webpackChunkwarehouse_system_app||[]).push([[761],{5761:(w,m,i)=>{i.r(m),i.d(m,{ProductFormComponent:()=>d});var p=i(6895),r=i(433),C=i(7579),c=i(2722);const P=/^[A-Z]{2,4}\s[0-9]{4,6}$/;var f=i(4004);class g{static uniqueCodeValidator(n){return o=>n.getProducts().pipe((0,f.U)(s=>s.some(a=>a.code===o.value)?{codeExists:!0}:null))}static emptyLocationValidator(n){return o=>n.getProducts().pipe((0,f.U)(s=>s.some(a=>a.floor===o.get("floor").value&&a.section===o.get("section").value&&a.id!==o.get("id").value)?{locationTaken:!0}:null))}}var t=i(8256),_=i(9390),h=i(4940);function q(e,n){1&e&&(t.TgZ(0,"span",17),t._uU(1,"Add New Product"),t.qZA())}function y(e,n){1&e&&(t.TgZ(0,"span",17),t._uU(1,"Edit Product"),t.qZA())}function v(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Product code is required. "),t.qZA())}function Z(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Code format is 2-4 uppercase letters, empty space and 4-6 digits. "),t.qZA())}function T(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Code must be unique."),t.qZA())}function F(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Product quantity is required. "),t.qZA())}function b(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Minimum quantity is 1. "),t.qZA())}function I(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Maximum quantity is 100. "),t.qZA())}function A(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Floor is required. "),t.qZA())}function J(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Floor range is 1-3. "),t.qZA())}function N(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Floor range is 1-3."),t.qZA())}function U(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Section is required. "),t.qZA())}function M(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Section range is 1-3. "),t.qZA())}function O(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," Section range is 1-3."),t.qZA())}function Q(e,n){1&e&&(t.TgZ(0,"span",18),t._uU(1," This location is already taken. "),t.qZA())}const l=function(e){return{"is-invalid":e}},u=function(e){return{visible:e}},V=function(e){return{"is-disabled":e}};class d{get id(){return this.productForm?.get("id")}get code(){return this.productForm?.get("code")}get quantity(){return this.productForm?.get("quantity")}get floor(){return this.productForm?.get("floor")}get section(){return this.productForm?.get("section")}constructor(n,o,s,a){this.productService=n,this.formBuilder=o,this.router=s,this.route=a,this.destroy$=new C.x}ngOnInit(){this.buildForm(),this.checkIsNew(),this.isNewProduct||this.populateForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}buildForm(){this.productForm=this.formBuilder.group({id:[null],code:[null,[r.kI.required,r.kI.pattern(P)],g.uniqueCodeValidator(this.productService)],quantity:[null,[r.kI.required,r.kI.min(1),r.kI.max(100)]],floor:[null,[r.kI.required,r.kI.min(1),r.kI.max(3)]],section:[null,[r.kI.required,r.kI.min(1),r.kI.max(3)]]},{validators:null,asyncValidators:g.emptyLocationValidator(this.productService)})}populateForm(){const n=+this.route.snapshot.paramMap.get("id");this.productService.getProduct(n).pipe((0,c.R)(this.destroy$)).subscribe(o=>{this.id.setValue(o?.id),this.code.setValue(o?.code),this.code.disable(),this.quantity.setValue(o?.quantity),this.floor.setValue(o?.floor),this.section.setValue(o?.section)})}checkIsNew(){this.route.data.pipe((0,c.R)(this.destroy$)).subscribe(n=>this.isNewProduct=!!n?.isNew)}createProduct(n){this.productService.createProduct(n).pipe((0,c.R)(this.destroy$)).subscribe(()=>this.router.navigate(["/home"]))}updateProduct(n){this.productService.updateProduct(n).pipe((0,c.R)(this.destroy$)).subscribe(()=>this.router.navigate(["/home"]))}onSave(){const n=this.productForm.getRawValue();this.isNewProduct?this.createProduct(n):this.updateProduct(n)}}d.\u0275fac=function(n){return new(n||d)(t.Y36(_.M),t.Y36(r.qu),t.Y36(h.F0),t.Y36(h.gz))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-product-form"]],standalone:!0,features:[t.jDz],decls:42,vars:47,consts:[[1,"form-wrapper"],["autocomplete","off",1,"form",3,"formGroup"],["class","form-title",4,"ngIf","ngIfElse"],["editProduct",""],[1,"form-row"],["for","code",1,"form-label"],["type","text","id","code","placeholder","Unique Product Code","formControlName","code",1,"form-input",3,"ngClass"],[1,"invalid",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","quantity",1,"form-label"],["type","number","min","1","id","quantity","placeholder","Product Quantity","formControlName","quantity",1,"form-input",3,"ngClass"],["for","floor",1,"form-label"],["type","number","min","1","id","floor","placeholder","Floor 1-3","formControlName","floor",1,"form-input",3,"ngClass"],["for","section",1,"form-label"],["type","number","id","section","min","1","placeholder","Section 1-3","formControlName","section",1,"form-input",3,"ngClass"],[1,"form-footer"],["type","button",1,"warehouse-button",3,"disabled","ngClass","click"],[1,"form-title"],[1,"invalid-feedback"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.YNc(2,q,2,0,"span",2),t.YNc(3,y,2,0,"ng-template",null,3,t.W1O),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Product Code *"),t.qZA(),t._UZ(8,"input",6),t.TgZ(9,"span",7),t.YNc(10,v,2,0,"span",8),t.YNc(11,Z,2,0,"span",8),t.YNc(12,T,2,0,"span",8),t.qZA()(),t.TgZ(13,"div",4)(14,"label",9),t._uU(15,"Quantity *"),t.qZA(),t._UZ(16,"input",10),t.TgZ(17,"span",7),t.YNc(18,F,2,0,"span",8),t.YNc(19,b,2,0,"span",8),t.YNc(20,I,2,0,"span",8),t.qZA()(),t.TgZ(21,"div",4)(22,"label",11),t._uU(23,"Floor *"),t.qZA(),t._UZ(24,"input",12),t.TgZ(25,"span",7),t.YNc(26,A,2,0,"span",8),t.YNc(27,J,2,0,"span",8),t.YNc(28,N,2,0,"span",8),t.qZA()(),t.TgZ(29,"div",4)(30,"label",13),t._uU(31,"Section *"),t.qZA(),t._UZ(32,"input",14),t.TgZ(33,"span",7),t.YNc(34,U,2,0,"span",8),t.YNc(35,M,2,0,"span",8),t.YNc(36,O,2,0,"span",8),t.qZA()(),t.TgZ(37,"span",7),t.YNc(38,Q,2,0,"span",8),t.qZA(),t.TgZ(39,"div",15)(40,"button",16),t.NdJ("click",function(){return o.onSave()}),t._uU(41," Save Product "),t.qZA()()()()),2&n){const s=t.MAs(4);t.xp6(1),t.Q6J("formGroup",o.productForm),t.xp6(1),t.Q6J("ngIf",o.isNewProduct)("ngIfElse",s),t.xp6(6),t.Q6J("ngClass",t.VKq(27,l,(o.code.touched||o.code.dirty)&&!o.code.valid)),t.xp6(1),t.Q6J("ngClass",t.VKq(29,u,(o.code.touched||o.code.dirty)&&!o.code.valid)),t.xp6(1),t.Q6J("ngIf",o.code.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.code.hasError("pattern")),t.xp6(1),t.Q6J("ngIf",o.code.hasError("codeExists")),t.xp6(4),t.Q6J("ngClass",t.VKq(31,l,(o.quantity.touched||o.quantity.dirty)&&!o.quantity.valid)),t.xp6(1),t.Q6J("ngClass",t.VKq(33,u,(o.quantity.touched||o.quantity.dirty)&&!o.quantity.valid)),t.xp6(1),t.Q6J("ngIf",o.quantity.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.quantity.hasError("min")),t.xp6(1),t.Q6J("ngIf",o.quantity.hasError("max")),t.xp6(4),t.Q6J("ngClass",t.VKq(35,l,(o.floor.touched||o.floor.dirty)&&!o.floor.valid)),t.xp6(1),t.Q6J("ngClass",t.VKq(37,u,(o.floor.touched||o.floor.dirty)&&!o.floor.valid)),t.xp6(1),t.Q6J("ngIf",o.floor.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.floor.hasError("min")),t.xp6(1),t.Q6J("ngIf",o.floor.hasError("max")),t.xp6(4),t.Q6J("ngClass",t.VKq(39,l,(o.section.touched||o.section.dirty)&&!o.section.valid)),t.xp6(1),t.Q6J("ngClass",t.VKq(41,u,(o.section.touched||o.section.dirty)&&!o.section.valid)),t.xp6(1),t.Q6J("ngIf",o.section.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.section.hasError("min")),t.xp6(1),t.Q6J("ngIf",o.section.hasError("max")),t.xp6(1),t.Q6J("ngClass",t.VKq(43,u,(o.productForm.touched||o.productForm.dirty)&&!o.productForm.valid)),t.xp6(1),t.Q6J("ngIf",o.productForm.hasError("locationTaken")),t.xp6(2),t.Q6J("disabled",o.productForm.invalid)("ngClass",t.VKq(45,V,o.productForm.invalid))}},dependencies:[r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,p.O5,p.mk],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;justify-content:flex-start;padding:2rem;flex-wrap:wrap}.form-title[_ngcontent-%COMP%]{color:#000;font-size:1.2rem}.form-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2.5rem;align-items:center}.form-label[_ngcontent-%COMP%]{font-size:1rem;color:#999;padding:.25rem;min-width:4rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{color:#333;font-size:1rem;border:.05rem solid #333;border-radius:1.5rem;padding:.5rem;outline:transparent;min-width:15rem}.form-select[_ngcontent-%COMP%]:hover{cursor:pointer}.form[_ngcontent-%COMP%]   .is-invalid[_ngcontent-%COMP%]{border:.1rem solid #ff285a}.form[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]{margin:.15rem 0;max-width:15rem;visibility:hidden}.form[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{font-size:.8rem;color:#ff285a}.form[_ngcontent-%COMP%]   .visible[_ngcontent-%COMP%]{visibility:visible}.form-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]{box-shadow:.1rem .1rem .5rem #333;border-radius:1rem;margin-bottom:1rem}.form-title[_ngcontent-%COMP%]{text-align:center}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.form-label[_ngcontent-%COMP%]{max-width:8rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{max-width:20rem}.form-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:center}"]})}}]);